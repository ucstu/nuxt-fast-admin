---
title: å…¬å…±é€»è¾‘
---

# å…¬å…±é€»è¾‘

æœ¬æ¨¡å—è¿˜æä¾›äº†ä¸€äº›å…¬å…±é€»è¾‘ä»¥ä¾¿äºä»æ¨¡å—ä¸­è·å–ä¸€äº›æœ‰ç”¨å†…å®¹ã€‚

::alert{type="info"}
ğŸ‰ è°ƒç”¨ä»¥ä¸‹å¯ç»„åˆé¡¹æˆ–å‡½æ•°æ—¶å‡æœ‰ä»£ç æç¤ºå’Œæ³¨é‡Šã€‚
::

## `useAuth` å¯ç»„åˆé¡¹

è¯¥å¯ç»„åˆé¡¹è¿”å›äº†ç™»é™†çŠ¶æ€ã€ç”¨æˆ·ä¿¡æ¯ã€ç™»é™†æ³¨å†Œå·¥å…·å‡½æ•°ï¼Œç”¨æ³•ç¤ºä¾‹å¦‚ä¸‹ï¼š

```ts
const {
  /**
   * æ”¹å˜è§’è‰²
   * @param role è§’è‰²
   */
  changeRole,
  /**
   * åˆ·æ–°ç”¨æˆ·ä¿¡æ¯
   * @param token ä»¤ç‰Œ
   */
  refreshUser,
  /**
   * ç™»å½•
   * @param form ç™»å½•è¡¨å•
   * @param options ç™»å½•é€‰é¡¹
   */
  signIn,
  /**
   * é€€å‡ºç™»å½•
   * @param options é€€å‡ºç™»å½•é€‰é¡¹
   */
  signOut,
  /**
   * æ³¨å†Œ
   * @param form æ³¨å†Œè¡¨å•
   * @param options æ³¨å†Œé€‰é¡¹
   */
  signUp,
  /**
   * åˆ·æ–°ä»¤ç‰Œ
   * @param token ä»¤ç‰Œ
   * @param refreshToken åˆ·æ–°ä»¤ç‰Œ
   * @description åˆ·æ–°ä»¤ç‰Œï¼ˆåªåœ¨ refresh provider ä¸‹ç”Ÿæ•ˆï¼‰
   */
  refresh,
  /**
   * æƒé™åˆ—è¡¨
   */
  permissions,
  /**
   * è®°ä½æˆ‘
   */
  remember,
  /**
   * è§’è‰²åˆ—è¡¨
   */
  roles,
  /**
   * ç™»é™†çŠ¶æ€
   */
  status,
  /**
   * ä»¤ç‰Œ
   */
  token,
  /**
   * ç”¨æˆ·ä¿¡æ¯
   */
  user,
} = useAuth();
```

## `$auth` å‡½æ•°

è¯¥å‡½æ•°è¿”å›äº†å½“å‰ç”¨æˆ·æ˜¯å¦å…·æœ‰æƒé™ï¼ˆæ— å“åº”å¼ï¼‰ï¼Œç”¨æ³•ç¤ºä¾‹å¦‚ä¸‹ï¼š

```vue
<template>
  <div>
    user
    <nuxt-link to="/"> to home </nuxt-link>
    <nuxt-link v-if="canAccess" to="/admin"> to admin </nuxt-link>
    <nuxt-link v-if="$auth('permission3')" to="/auth"> to auth </nuxt-link>
  </div>
</template>

<script setup lang="ts">
const canAccess = auth("|", role("admin"), "permission1", per("permission2"));
</script>
```

## `auth` å¯ç»„åˆé¡¹

è¯¥å¯ç»„åˆé¡¹è¿”å›äº†å½“å‰ç”¨æˆ·æ˜¯å¦å…·æœ‰æƒé™ï¼Œç”¨æ³•ç¤ºä¾‹å¦‚ä¸‹ï¼š

```vue
<template>
  <div>
    user
    <nuxt-link to="/"> to home </nuxt-link>
    <nuxt-link v-if="canAccess" to="/admin"> to admin </nuxt-link>
    <nuxt-link v-if="$auth('permission3')" to="/auth"> to auth </nuxt-link>
  </div>
</template>

<script setup lang="ts">
const canAccess = auth("|", role("admin"), "permission1", per("permission2"));
</script>
```

## `per` å‡½æ•°

è¯¥å‡½æ•°åå›ä¸€ä¸ªæƒé™å°è£…ï¼Œç”¨æ³•ç¤ºä¾‹å¦‚ä¸‹ï¼š

```vue
<template>
  <div>
    user
    <nuxt-link to="/"> to home </nuxt-link>
    <nuxt-link v-if="canAccess" to="/admin"> to admin </nuxt-link>
    <nuxt-link v-if="$auth('permission3')" to="/auth"> to auth </nuxt-link>
  </div>
</template>

<script setup lang="ts">
const canAccess = auth("|", role("admin"), "permission1", per("permission2"));
</script>
```

## `role` å‡½æ•°

è¯¥å‡½æ•°åå›ä¸€ä¸ªè§’è‰²å°è£…ï¼Œç”¨æ³•ç¤ºä¾‹å¦‚ä¸‹ï¼š

```vue
<template>
  <div>
    user
    <nuxt-link to="/"> to home </nuxt-link>
    <nuxt-link v-if="canAccess" to="/admin"> to admin </nuxt-link>
    <nuxt-link v-if="$auth('permission3')" to="/auth"> to auth </nuxt-link>
  </div>
</template>

<script setup lang="ts">
const canAccess = auth("|", role("admin"), "permission1", per("permission2"));
</script>
```
